# Проект автотестов для API "Яндекс.Самокат"

Этот проект предназначен для автоматизированного тестирования API
веб-сервиса ["Яндекс.Самокат"](https://qa-scooter.praktikum-services.ru/).

## Структура проекта

Основная структура проекта автотестов:

```plaintext
Sprint_7/
│── data/
│   └── data.py
│   └── helpers.py
│   └── test_data_generator.py
├── Tests/
│   ├── fixtures.py
│   ├── tests_main/
│   │   ├── tests_courier/
│   │   │   └── test_courier_creation/
│   │   │       ├── test_create_courier_positive.py
│   │   │       └── test_create_courier_negative.py
│   │   │   └── test_courier_login/
│   │   │       ├── test_login_courier_positive.py
│   │   │       └── test_login_courier_negative.py
│   │   ├── tests_orders/
│   │   │   └── test_order_creation/
│   │   │       ├── test_create_order_positive.py
│   │   │       └── test_create_order_negative.py
│   │   │   └── test_order_list/
│   │   │       └── test_list_orders_positive.py
│   ├── tests_extra/
│   │   ├── tests_courier_extra/
│   │   │   └── test_courier_deletion/
│   │   │       ├── test_delete_courier_positive.py
│   │   │       └── test_delete_courier_negative.py
│   │   ├── tests_orders_extra/
│   │   │   └── test_order_acceptance/
│   │   │       ├── test_accept_order_positive.py
│   │   │       └── test_accept_order_negative.py
│   │   │   └── test_order_tracking/
│   │   │       ├── test_track_order_positive.py
│   │   │       └── test_track_order_negative.py
└── requirements.txt
```

## Описание тестов

### Основные проверки (main):

1. **Создание курьера:**
    - Курьера можно создать.
    - Нельзя создать двух одинаковых курьеров.
    - Чтобы создать курьера, нужно передать в ручку все обязательные поля.
    - Запрос возвращает правильный код ответа.
    - Успешный запрос возвращает `{"ok":true}`.
    - Если одного из полей нет, запрос возвращает ошибку.
    - Если создать пользователя с логином, который уже есть, возвращается ошибка.

2. **Логин курьера:**
    - Курьер может авторизоваться.
    - Для авторизации нужно передать все обязательные поля.
    - Система вернёт ошибку, если неправильно указать логин или пароль.
    - Если какого-то поля нет, запрос возвращает ошибку.
    - Если авторизоваться под несуществующим пользователем, запрос возвращает ошибку.
    - Успешный запрос возвращает ID.

3. **Создание заказа:**
    - Можно указать один из цветов — BLACK или GREY.
    - Можно указать оба цвета.
    - Можно совсем не указывать цвет.
    - Тело ответа содержит track.
    - Чтобы протестировать создание заказа, нужно использовать параметризацию.

4. **Список заказов:**
    - В тело ответа возвращается список заказов.

### Дополнительные проверки (extra):

1. **Удалить курьера:**
    - Неуспешный запрос возвращает соответствующую ошибку.
    - Успешный запрос возвращает `{"ok":true}`.
    - Если отправить запрос без ID, вернётся ошибка.
    - Если отправить запрос с несуществующим ID, вернётся ошибка.

2. **Принять заказ:**
    - Успешный запрос возвращает `{"ok":true}`.
    - Если не передать ID курьера, запрос вернёт ошибку.
    - Если передать неверный ID курьера, запрос вернёт ошибку.
    - Если не передать номер заказа, запрос вернёт ошибку.
    - Если передать неверный номер заказа, запрос вернёт ошибку.

3. **Получить заказ по его номеру:**
    - Успешный запрос возвращает объект с заказом.
    - Запрос без номера заказа возвращает ошибку.
    - Запрос с несуществующим заказом возвращает ошибку.

## Документация:

- [Описание API](https://qa-scooter.praktikum-services.ru/docs/#)
- [Требования к веб-приложению](https://praktikum.notion.site/82-d6b843a12b8e42989267e8ea330f6b1c)
- [Требования к бэкенду приложения](https://praktikum.notion.site/20389c6a65da49fb8e22720c4356887c)

## Установка

1. **Клонировать репозиторий:**

```bash
git clone https://github.com/<your-repository>.git
cd <your-repository>
```

2. **Создать виртуальное окружение и активировать его:**

```bash
python -m venv venv
source venv/bin/activate  # Для Windows: venv\Scripts\activate
```

3. **Установить зависимости:**

```bash
pip install -r requirements.txt
```

4. **Установить и настроить Allure для отчетов:**

Следуйте официальной документации Allure: [Allure Installation Guide](https://docs.qameta.io/allure/#_get_started)

## Инструкции по запуску

### Запуск тестов

1. **Запуск тестов с использованием pytest:**

```bash
pytest --alluredir=allure_results
```

2. **Генерация и просмотр отчетов Allure:**

```bash
allure serve allure_results
```

## Используемые технологии и инструменты

- **Pytest**: Фреймворк для написания и запуска тестов.
- **Allure**: Инструмент для создания наглядных отчетов о тестировании.